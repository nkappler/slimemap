{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/long/dist/long.js","webpack:///./src/slimeMap.ts","webpack:///./src/marker.ts","webpack:///./src/ctxMenu.min.js","webpack:///./src/slimeChunk.ts","webpack:///./src/seededRandom.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","undefined","Long","low","high","unsigned","this","isLong","obj","__isLong__","configurable","INT_CACHE","UINT_CACHE","fromInt","cachedObj","cache","fromBits","fromNumber","isNaN","isFinite","UZERO","ZERO","TWO_PWR_64_DBL","MAX_UNSIGNED_VALUE","TWO_PWR_63_DBL","MIN_VALUE","MAX_VALUE","neg","TWO_PWR_32_DBL","lowBits","highBits","pow_dbl","Math","pow","fromString","str","radix","length","Error","RangeError","indexOf","substring","radixToPower","result","size","min","parseInt","power","mul","add","fromValue","val","TWO_PWR_16_DBL","TWO_PWR_24","ONE","UONE","NEG_ONE","LongPrototype","toInt","toNumber","toString","isZero","isNegative","eq","radixLong","div","rem1","sub","rem","remDiv","digits","getHighBits","getHighBitsUnsigned","getLowBits","getLowBitsUnsigned","getNumBitsAbs","bit","isPositive","isOdd","isEven","equals","other","notEquals","neq","lessThan","comp","lt","lessThanOrEqual","lte","greaterThan","gt","greaterThanOrEqual","gte","compare","thisNeg","otherNeg","negate","not","addend","a48","a32","a16","a00","b48","b32","b16","c48","c32","c16","c00","subtract","subtrahend","multiply","multiplier","b00","divide","divisor","approx","res","toUnsigned","shru","shr","shl","max","floor","log2","ceil","log","LN2","delta","approxRes","approxRem","modulo","mod","and","or","xor","shiftLeft","numBits","shiftRight","shiftRightUnsigned","toSigned","toBytes","le","toBytesLE","toBytesBE","hi","lo","apply","long_1","__importStar","marker_1","slimeChunk_1","getV2sfromAABB","aabb","p1","x","x1","z","z1","p2","x2","z2","getAABBfromV2s","origin","SlimeMap","id","config","_this","height","width","xPos","zPos","mousePos","__assign","zoom","minzoom","maxzoom","borderleft","bordertop","borderbottom","borderright","markers","controls","strokeColor","textColor","mapBackgroundColor","uiBackgroundColor","slimeChunkColor","markerDefaultColor","allowMarkers","canvas","createDOM","attachContextMenu","setAttribute","ctx","getContext","CanvasRenderingContext2D","assertEventHandlers","seed","default","Date","now","SCH","SlimeChunkHandler","updateSizes","redraw","onmousemove","event","offsetX","offsetY","buttons","movementX","movementY","drawFooter","onmousedown","_event","getMapCoord","onmouseup","setSeed","gotoCoordinate","param1","y","coordinate","isVector2D","loadFont","link","document","createElement","rel","type","href","head","appendChild","setInterval","drawStaticUI","drawUI","setTimeout","clearInterval","parent","getElementById","container","tagName","attributes","attr","style","parentNode","body","replaceChild","position","offsetWidth","offsetHeight","renderControls","bottom","controlsdDiv","assign","display","justifyContent","top","paddingRight","paddingLeft","boxSizing","lineHeight","seedDiv","seedInput","placeholder","seedButton","innerText","addEventListener","navDiv","xInput","zInput","navButton","Number","jumpMarker","deleteMarker","location","label","addMarker","mousewheelevt","test","navigator","userAgent","evt","e","onscroll","attachEvent","pos","preventDefault","zoomfactor","detail","newPos","offset","calcChunkVP","v2s","vp","doMath","calcViewport","chunkvp","vec","clearfooter","font","fillStyle","fillText","toFixed","Chunk","Slimes","isSlimeChunk","From","ChunkToCoord","To","textAlign","fillRect","updateSlimeVP","drawSlimeChunks","drawGrid","drawAllMarkers","clearBorderRight","JSON","stringify","vec2","getAbsCoord","factor","mark","lineWidth","beginPath","strokeStyle","moveTo","lineTo","stroke","closePath","fill","mapwidthcenter","mapheightcenter","isInVP","isOverMap","ignoreBorder","round","v","mapWidth","mapHeight","arg","f","isAABB","keys","window","marker","sm","push","deleteAllMarkers","arg0","splice","includes","findClosestMarker","searchPos","maxRadius","Infinity","closestMarker","closestDistance","forEach","distance","sqrt","showEditMarkerDialog","onSubmit","parentElement","popup","gridTemplateColumns","padding","className","labelInput","labelLabel","colorInput","colorLabel","color","xposInput","xPosLabel","zposInput","zPosLabel","cancelBtn","submitBtn","bounding","getBounding","margin","zIndex","background","boxShadow","left","onclick","removeChild","elem","cloneNode","visibility","getBoundingClientRect","ContextMenu","attach","cxm","coord","getLabelDesc","concat","text","action","updatedMarker","isDivider","disabled","subMenu","map","_i","_a","bezierCurveTo","arcTo","textWidth","measureText","a","b","TypeError","_classCallCheck","dir","closeMenu","arguments","querySelector","stopImmediatePropagation","menu","generateDOM","ctxmenu","handler","console","error","update","removeEventListener","delete","debounce","clearTimeout","itemIsDivider","innerHTML","title","tooltip","itemIsInteractive","itemIsSubMenu","itemIsAction","itemIsAnchor","target","openSubMenu","fontWeight","marginLeft","g","Element","h","getPosition","clientX","clientY","stopPropagation","innerWidth","innerHeight","readyState","insertBefore","childNodes","__importDefault","seededRandom_1","base","addend1","addend2","addend3","mask","chunk","updateSeed","tempseed","NSeededRandom","nextInt","nmultiplier","naddend","nmask","initseed","initialScramble","next","bits","bound","abs"],"mappings":"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","file":"slime.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","/*\r\n Copyright 2013 Daniel Wirtz <dcode@dcode.io>\r\n Copyright 2009 The Closure Library Authors. All Rights Reserved.\r\n\r\n Licensed under the Apache License, Version 2.0 (the \"License\");\r\n you may not use this file except in compliance with the License.\r\n You may obtain a copy of the License at\r\n\r\n http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n Unless required by applicable law or agreed to in writing, software\r\n distributed under the License is distributed on an \"AS-IS\" BASIS,\r\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n See the License for the specific language governing permissions and\r\n limitations under the License.\r\n */\r\n\r\n/**\r\n * @license long.js (c) 2013 Daniel Wirtz <dcode@dcode.io>\r\n * Released under the Apache License, Version 2.0\r\n * see: https://github.com/dcodeIO/long.js for details\r\n */\r\n(function(global, factory) {\r\n\r\n    /* AMD */ if (typeof define === 'function' && define[\"amd\"])\r\n        define([], factory);\r\n    /* CommonJS */ else if (typeof require === 'function' && typeof module === \"object\" && module && module[\"exports\"])\r\n        module[\"exports\"] = factory();\r\n    /* Global */ else\r\n        (global[\"dcodeIO\"] = global[\"dcodeIO\"] || {})[\"Long\"] = factory();\r\n\r\n})(this, function() {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * Constructs a 64 bit two's-complement integer, given its low and high 32 bit values as *signed* integers.\r\n     *  See the from* functions below for more convenient ways of constructing Longs.\r\n     * @exports Long\r\n     * @class A Long class for representing a 64 bit two's-complement integer value.\r\n     * @param {number} low The low (signed) 32 bits of the long\r\n     * @param {number} high The high (signed) 32 bits of the long\r\n     * @param {boolean=} unsigned Whether unsigned or not, defaults to `false` for signed\r\n     * @constructor\r\n     */\r\n    function Long(low, high, unsigned) {\r\n\r\n        /**\r\n         * The low 32 bits as a signed value.\r\n         * @type {number}\r\n         */\r\n        this.low = low | 0;\r\n\r\n        /**\r\n         * The high 32 bits as a signed value.\r\n         * @type {number}\r\n         */\r\n        this.high = high | 0;\r\n\r\n        /**\r\n         * Whether unsigned or not.\r\n         * @type {boolean}\r\n         */\r\n        this.unsigned = !!unsigned;\r\n    }\r\n\r\n    // The internal representation of a long is the two given signed, 32-bit values.\r\n    // We use 32-bit pieces because these are the size of integers on which\r\n    // Javascript performs bit-operations.  For operations like addition and\r\n    // multiplication, we split each number into 16 bit pieces, which can easily be\r\n    // multiplied within Javascript's floating-point representation without overflow\r\n    // or change in sign.\r\n    //\r\n    // In the algorithms below, we frequently reduce the negative case to the\r\n    // positive case by negating the input(s) and then post-processing the result.\r\n    // Note that we must ALWAYS check specially whether those values are MIN_VALUE\r\n    // (-2^63) because -MIN_VALUE == MIN_VALUE (since 2^63 cannot be represented as\r\n    // a positive number, it overflows back into a negative).  Not handling this\r\n    // case would often result in infinite recursion.\r\n    //\r\n    // Common constant values ZERO, ONE, NEG_ONE, etc. are defined below the from*\r\n    // methods on which they depend.\r\n\r\n    /**\r\n     * An indicator used to reliably determine if an object is a Long or not.\r\n     * @type {boolean}\r\n     * @const\r\n     * @private\r\n     */\r\n    Long.prototype.__isLong__;\r\n\r\n    Object.defineProperty(Long.prototype, \"__isLong__\", {\r\n        value: true,\r\n        enumerable: false,\r\n        configurable: false\r\n    });\r\n\r\n    /**\r\n     * @function\r\n     * @param {*} obj Object\r\n     * @returns {boolean}\r\n     * @inner\r\n     */\r\n    function isLong(obj) {\r\n        return (obj && obj[\"__isLong__\"]) === true;\r\n    }\r\n\r\n    /**\r\n     * Tests if the specified object is a Long.\r\n     * @function\r\n     * @param {*} obj Object\r\n     * @returns {boolean}\r\n     */\r\n    Long.isLong = isLong;\r\n\r\n    /**\r\n     * A cache of the Long representations of small integer values.\r\n     * @type {!Object}\r\n     * @inner\r\n     */\r\n    var INT_CACHE = {};\r\n\r\n    /**\r\n     * A cache of the Long representations of small unsigned integer values.\r\n     * @type {!Object}\r\n     * @inner\r\n     */\r\n    var UINT_CACHE = {};\r\n\r\n    /**\r\n     * @param {number} value\r\n     * @param {boolean=} unsigned\r\n     * @returns {!Long}\r\n     * @inner\r\n     */\r\n    function fromInt(value, unsigned) {\r\n        var obj, cachedObj, cache;\r\n        if (unsigned) {\r\n            value >>>= 0;\r\n            if (cache = (0 <= value && value < 256)) {\r\n                cachedObj = UINT_CACHE[value];\r\n                if (cachedObj)\r\n                    return cachedObj;\r\n            }\r\n            obj = fromBits(value, (value | 0) < 0 ? -1 : 0, true);\r\n            if (cache)\r\n                UINT_CACHE[value] = obj;\r\n            return obj;\r\n        } else {\r\n            value |= 0;\r\n            if (cache = (-128 <= value && value < 128)) {\r\n                cachedObj = INT_CACHE[value];\r\n                if (cachedObj)\r\n                    return cachedObj;\r\n            }\r\n            obj = fromBits(value, value < 0 ? -1 : 0, false);\r\n            if (cache)\r\n                INT_CACHE[value] = obj;\r\n            return obj;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns a Long representing the given 32 bit integer value.\r\n     * @function\r\n     * @param {number} value The 32 bit integer in question\r\n     * @param {boolean=} unsigned Whether unsigned or not, defaults to `false` for signed\r\n     * @returns {!Long} The corresponding Long value\r\n     */\r\n    Long.fromInt = fromInt;\r\n\r\n    /**\r\n     * @param {number} value\r\n     * @param {boolean=} unsigned\r\n     * @returns {!Long}\r\n     * @inner\r\n     */\r\n    function fromNumber(value, unsigned) {\r\n        if (isNaN(value) || !isFinite(value))\r\n            return unsigned ? UZERO : ZERO;\r\n        if (unsigned) {\r\n            if (value < 0)\r\n                return UZERO;\r\n            if (value >= TWO_PWR_64_DBL)\r\n                return MAX_UNSIGNED_VALUE;\r\n        } else {\r\n            if (value <= -TWO_PWR_63_DBL)\r\n                return MIN_VALUE;\r\n            if (value + 1 >= TWO_PWR_63_DBL)\r\n                return MAX_VALUE;\r\n        }\r\n        if (value < 0)\r\n            return fromNumber(-value, unsigned).neg();\r\n        return fromBits((value % TWO_PWR_32_DBL) | 0, (value / TWO_PWR_32_DBL) | 0, unsigned);\r\n    }\r\n\r\n    /**\r\n     * Returns a Long representing the given value, provided that it is a finite number. Otherwise, zero is returned.\r\n     * @function\r\n     * @param {number} value The number in question\r\n     * @param {boolean=} unsigned Whether unsigned or not, defaults to `false` for signed\r\n     * @returns {!Long} The corresponding Long value\r\n     */\r\n    Long.fromNumber = fromNumber;\r\n\r\n    /**\r\n     * @param {number} lowBits\r\n     * @param {number} highBits\r\n     * @param {boolean=} unsigned\r\n     * @returns {!Long}\r\n     * @inner\r\n     */\r\n    function fromBits(lowBits, highBits, unsigned) {\r\n        return new Long(lowBits, highBits, unsigned);\r\n    }\r\n\r\n    /**\r\n     * Returns a Long representing the 64 bit integer that comes by concatenating the given low and high bits. Each is\r\n     *  assumed to use 32 bits.\r\n     * @function\r\n     * @param {number} lowBits The low 32 bits\r\n     * @param {number} highBits The high 32 bits\r\n     * @param {boolean=} unsigned Whether unsigned or not, defaults to `false` for signed\r\n     * @returns {!Long} The corresponding Long value\r\n     */\r\n    Long.fromBits = fromBits;\r\n\r\n    /**\r\n     * @function\r\n     * @param {number} base\r\n     * @param {number} exponent\r\n     * @returns {number}\r\n     * @inner\r\n     */\r\n    var pow_dbl = Math.pow; // Used 4 times (4*8 to 15+4)\r\n\r\n    /**\r\n     * @param {string} str\r\n     * @param {(boolean|number)=} unsigned\r\n     * @param {number=} radix\r\n     * @returns {!Long}\r\n     * @inner\r\n     */\r\n    function fromString(str, unsigned, radix) {\r\n        if (str.length === 0)\r\n            throw Error('empty string');\r\n        if (str === \"NaN\" || str === \"Infinity\" || str === \"+Infinity\" || str === \"-Infinity\")\r\n            return ZERO;\r\n        if (typeof unsigned === 'number') {\r\n            // For goog.math.long compatibility\r\n            radix = unsigned,\r\n            unsigned = false;\r\n        } else {\r\n            unsigned = !! unsigned;\r\n        }\r\n        radix = radix || 10;\r\n        if (radix < 2 || 36 < radix)\r\n            throw RangeError('radix');\r\n\r\n        var p;\r\n        if ((p = str.indexOf('-')) > 0)\r\n            throw Error('interior hyphen');\r\n        else if (p === 0) {\r\n            return fromString(str.substring(1), unsigned, radix).neg();\r\n        }\r\n\r\n        // Do several (8) digits each time through the loop, so as to\r\n        // minimize the calls to the very expensive emulated div.\r\n        var radixToPower = fromNumber(pow_dbl(radix, 8));\r\n\r\n        var result = ZERO;\r\n        for (var i = 0; i < str.length; i += 8) {\r\n            var size = Math.min(8, str.length - i),\r\n                value = parseInt(str.substring(i, i + size), radix);\r\n            if (size < 8) {\r\n                var power = fromNumber(pow_dbl(radix, size));\r\n                result = result.mul(power).add(fromNumber(value));\r\n            } else {\r\n                result = result.mul(radixToPower);\r\n                result = result.add(fromNumber(value));\r\n            }\r\n        }\r\n        result.unsigned = unsigned;\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Returns a Long representation of the given string, written using the specified radix.\r\n     * @function\r\n     * @param {string} str The textual representation of the Long\r\n     * @param {(boolean|number)=} unsigned Whether unsigned or not, defaults to `false` for signed\r\n     * @param {number=} radix The radix in which the text is written (2-36), defaults to 10\r\n     * @returns {!Long} The corresponding Long value\r\n     */\r\n    Long.fromString = fromString;\r\n\r\n    /**\r\n     * @function\r\n     * @param {!Long|number|string|!{low: number, high: number, unsigned: boolean}} val\r\n     * @returns {!Long}\r\n     * @inner\r\n     */\r\n    function fromValue(val) {\r\n        if (val /* is compatible */ instanceof Long)\r\n            return val;\r\n        if (typeof val === 'number')\r\n            return fromNumber(val);\r\n        if (typeof val === 'string')\r\n            return fromString(val);\r\n        // Throws for non-objects, converts non-instanceof Long:\r\n        return fromBits(val.low, val.high, val.unsigned);\r\n    }\r\n\r\n    /**\r\n     * Converts the specified value to a Long.\r\n     * @function\r\n     * @param {!Long|number|string|!{low: number, high: number, unsigned: boolean}} val Value\r\n     * @returns {!Long}\r\n     */\r\n    Long.fromValue = fromValue;\r\n\r\n    // NOTE: the compiler should inline these constant values below and then remove these variables, so there should be\r\n    // no runtime penalty for these.\r\n\r\n    /**\r\n     * @type {number}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var TWO_PWR_16_DBL = 1 << 16;\r\n\r\n    /**\r\n     * @type {number}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var TWO_PWR_24_DBL = 1 << 24;\r\n\r\n    /**\r\n     * @type {number}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var TWO_PWR_32_DBL = TWO_PWR_16_DBL * TWO_PWR_16_DBL;\r\n\r\n    /**\r\n     * @type {number}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var TWO_PWR_64_DBL = TWO_PWR_32_DBL * TWO_PWR_32_DBL;\r\n\r\n    /**\r\n     * @type {number}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var TWO_PWR_63_DBL = TWO_PWR_64_DBL / 2;\r\n\r\n    /**\r\n     * @type {!Long}\r\n     * @const\r\n     * @inner\r\n     */\r\n    var TWO_PWR_24 = fromInt(TWO_PWR_24_DBL);\r\n\r\n    /**\r\n     * @type {!Long}\r\n     * @inner\r\n     */\r\n    var ZERO = fromInt(0);\r\n\r\n    /**\r\n     * Signed zero.\r\n     * @type {!Long}\r\n     */\r\n    Long.ZERO = ZERO;\r\n\r\n    /**\r\n     * @type {!Long}\r\n     * @inner\r\n     */\r\n    var UZERO = fromInt(0, true);\r\n\r\n    /**\r\n     * Unsigned zero.\r\n     * @type {!Long}\r\n     */\r\n    Long.UZERO = UZERO;\r\n\r\n    /**\r\n     * @type {!Long}\r\n     * @inner\r\n     */\r\n    var ONE = fromInt(1);\r\n\r\n    /**\r\n     * Signed one.\r\n     * @type {!Long}\r\n     */\r\n    Long.ONE = ONE;\r\n\r\n    /**\r\n     * @type {!Long}\r\n     * @inner\r\n     */\r\n    var UONE = fromInt(1, true);\r\n\r\n    /**\r\n     * Unsigned one.\r\n     * @type {!Long}\r\n     */\r\n    Long.UONE = UONE;\r\n\r\n    /**\r\n     * @type {!Long}\r\n     * @inner\r\n     */\r\n    var NEG_ONE = fromInt(-1);\r\n\r\n    /**\r\n     * Signed negative one.\r\n     * @type {!Long}\r\n     */\r\n    Long.NEG_ONE = NEG_ONE;\r\n\r\n    /**\r\n     * @type {!Long}\r\n     * @inner\r\n     */\r\n    var MAX_VALUE = fromBits(0xFFFFFFFF|0, 0x7FFFFFFF|0, false);\r\n\r\n    /**\r\n     * Maximum signed value.\r\n     * @type {!Long}\r\n     */\r\n    Long.MAX_VALUE = MAX_VALUE;\r\n\r\n    /**\r\n     * @type {!Long}\r\n     * @inner\r\n     */\r\n    var MAX_UNSIGNED_VALUE = fromBits(0xFFFFFFFF|0, 0xFFFFFFFF|0, true);\r\n\r\n    /**\r\n     * Maximum unsigned value.\r\n     * @type {!Long}\r\n     */\r\n    Long.MAX_UNSIGNED_VALUE = MAX_UNSIGNED_VALUE;\r\n\r\n    /**\r\n     * @type {!Long}\r\n     * @inner\r\n     */\r\n    var MIN_VALUE = fromBits(0, 0x80000000|0, false);\r\n\r\n    /**\r\n     * Minimum signed value.\r\n     * @type {!Long}\r\n     */\r\n    Long.MIN_VALUE = MIN_VALUE;\r\n\r\n    /**\r\n     * @alias Long.prototype\r\n     * @inner\r\n     */\r\n    var LongPrototype = Long.prototype;\r\n\r\n    /**\r\n     * Converts the Long to a 32 bit integer, assuming it is a 32 bit integer.\r\n     * @returns {number}\r\n     */\r\n    LongPrototype.toInt = function toInt() {\r\n        return this.unsigned ? this.low >>> 0 : this.low;\r\n    };\r\n\r\n    /**\r\n     * Converts the Long to a the nearest floating-point representation of this value (double, 53 bit mantissa).\r\n     * @returns {number}\r\n     */\r\n    LongPrototype.toNumber = function toNumber() {\r\n        if (this.unsigned)\r\n            return ((this.high >>> 0) * TWO_PWR_32_DBL) + (this.low >>> 0);\r\n        return this.high * TWO_PWR_32_DBL + (this.low >>> 0);\r\n    };\r\n\r\n    /**\r\n     * Converts the Long to a string written in the specified radix.\r\n     * @param {number=} radix Radix (2-36), defaults to 10\r\n     * @returns {string}\r\n     * @override\r\n     * @throws {RangeError} If `radix` is out of range\r\n     */\r\n    LongPrototype.toString = function toString(radix) {\r\n        radix = radix || 10;\r\n        if (radix < 2 || 36 < radix)\r\n            throw RangeError('radix');\r\n        if (this.isZero())\r\n            return '0';\r\n        if (this.isNegative()) { // Unsigned Longs are never negative\r\n            if (this.eq(MIN_VALUE)) {\r\n                // We need to change the Long value before it can be negated, so we remove\r\n                // the bottom-most digit in this base and then recurse to do the rest.\r\n                var radixLong = fromNumber(radix),\r\n                    div = this.div(radixLong),\r\n                    rem1 = div.mul(radixLong).sub(this);\r\n                return div.toString(radix) + rem1.toInt().toString(radix);\r\n            } else\r\n                return '-' + this.neg().toString(radix);\r\n        }\r\n\r\n        // Do several (6) digits each time through the loop, so as to\r\n        // minimize the calls to the very expensive emulated div.\r\n        var radixToPower = fromNumber(pow_dbl(radix, 6), this.unsigned),\r\n            rem = this;\r\n        var result = '';\r\n        while (true) {\r\n            var remDiv = rem.div(radixToPower),\r\n                intval = rem.sub(remDiv.mul(radixToPower)).toInt() >>> 0,\r\n                digits = intval.toString(radix);\r\n            rem = remDiv;\r\n            if (rem.isZero())\r\n                return digits + result;\r\n            else {\r\n                while (digits.length < 6)\r\n                    digits = '0' + digits;\r\n                result = '' + digits + result;\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Gets the high 32 bits as a signed integer.\r\n     * @returns {number} Signed high bits\r\n     */\r\n    LongPrototype.getHighBits = function getHighBits() {\r\n        return this.high;\r\n    };\r\n\r\n    /**\r\n     * Gets the high 32 bits as an unsigned integer.\r\n     * @returns {number} Unsigned high bits\r\n     */\r\n    LongPrototype.getHighBitsUnsigned = function getHighBitsUnsigned() {\r\n        return this.high >>> 0;\r\n    };\r\n\r\n    /**\r\n     * Gets the low 32 bits as a signed integer.\r\n     * @returns {number} Signed low bits\r\n     */\r\n    LongPrototype.getLowBits = function getLowBits() {\r\n        return this.low;\r\n    };\r\n\r\n    /**\r\n     * Gets the low 32 bits as an unsigned integer.\r\n     * @returns {number} Unsigned low bits\r\n     */\r\n    LongPrototype.getLowBitsUnsigned = function getLowBitsUnsigned() {\r\n        return this.low >>> 0;\r\n    };\r\n\r\n    /**\r\n     * Gets the number of bits needed to represent the absolute value of this Long.\r\n     * @returns {number}\r\n     */\r\n    LongPrototype.getNumBitsAbs = function getNumBitsAbs() {\r\n        if (this.isNegative()) // Unsigned Longs are never negative\r\n            return this.eq(MIN_VALUE) ? 64 : this.neg().getNumBitsAbs();\r\n        var val = this.high != 0 ? this.high : this.low;\r\n        for (var bit = 31; bit > 0; bit--)\r\n            if ((val & (1 << bit)) != 0)\r\n                break;\r\n        return this.high != 0 ? bit + 33 : bit + 1;\r\n    };\r\n\r\n    /**\r\n     * Tests if this Long's value equals zero.\r\n     * @returns {boolean}\r\n     */\r\n    LongPrototype.isZero = function isZero() {\r\n        return this.high === 0 && this.low === 0;\r\n    };\r\n\r\n    /**\r\n     * Tests if this Long's value is negative.\r\n     * @returns {boolean}\r\n     */\r\n    LongPrototype.isNegative = function isNegative() {\r\n        return !this.unsigned && this.high < 0;\r\n    };\r\n\r\n    /**\r\n     * Tests if this Long's value is positive.\r\n     * @returns {boolean}\r\n     */\r\n    LongPrototype.isPositive = function isPositive() {\r\n        return this.unsigned || this.high >= 0;\r\n    };\r\n\r\n    /**\r\n     * Tests if this Long's value is odd.\r\n     * @returns {boolean}\r\n     */\r\n    LongPrototype.isOdd = function isOdd() {\r\n        return (this.low & 1) === 1;\r\n    };\r\n\r\n    /**\r\n     * Tests if this Long's value is even.\r\n     * @returns {boolean}\r\n     */\r\n    LongPrototype.isEven = function isEven() {\r\n        return (this.low & 1) === 0;\r\n    };\r\n\r\n    /**\r\n     * Tests if this Long's value equals the specified's.\r\n     * @param {!Long|number|string} other Other value\r\n     * @returns {boolean}\r\n     */\r\n    LongPrototype.equals = function equals(other) {\r\n        if (!isLong(other))\r\n            other = fromValue(other);\r\n        if (this.unsigned !== other.unsigned && (this.high >>> 31) === 1 && (other.high >>> 31) === 1)\r\n            return false;\r\n        return this.high === other.high && this.low === other.low;\r\n    };\r\n\r\n    /**\r\n     * Tests if this Long's value equals the specified's. This is an alias of {@link Long#equals}.\r\n     * @function\r\n     * @param {!Long|number|string} other Other value\r\n     * @returns {boolean}\r\n     */\r\n    LongPrototype.eq = LongPrototype.equals;\r\n\r\n    /**\r\n     * Tests if this Long's value differs from the specified's.\r\n     * @param {!Long|number|string} other Other value\r\n     * @returns {boolean}\r\n     */\r\n    LongPrototype.notEquals = function notEquals(other) {\r\n        return !this.eq(/* validates */ other);\r\n    };\r\n\r\n    /**\r\n     * Tests if this Long's value differs from the specified's. This is an alias of {@link Long#notEquals}.\r\n     * @function\r\n     * @param {!Long|number|string} other Other value\r\n     * @returns {boolean}\r\n     */\r\n    LongPrototype.neq = LongPrototype.notEquals;\r\n\r\n    /**\r\n     * Tests if this Long's value is less than the specified's.\r\n     * @param {!Long|number|string} other Other value\r\n     * @returns {boolean}\r\n     */\r\n    LongPrototype.lessThan = function lessThan(other) {\r\n        return this.comp(/* validates */ other) < 0;\r\n    };\r\n\r\n    /**\r\n     * Tests if this Long's value is less than the specified's. This is an alias of {@link Long#lessThan}.\r\n     * @function\r\n     * @param {!Long|number|string} other Other value\r\n     * @returns {boolean}\r\n     */\r\n    LongPrototype.lt = LongPrototype.lessThan;\r\n\r\n    /**\r\n     * Tests if this Long's value is less than or equal the specified's.\r\n     * @param {!Long|number|string} other Other value\r\n     * @returns {boolean}\r\n     */\r\n    LongPrototype.lessThanOrEqual = function lessThanOrEqual(other) {\r\n        return this.comp(/* validates */ other) <= 0;\r\n    };\r\n\r\n    /**\r\n     * Tests if this Long's value is less than or equal the specified's. This is an alias of {@link Long#lessThanOrEqual}.\r\n     * @function\r\n     * @param {!Long|number|string} other Other value\r\n     * @returns {boolean}\r\n     */\r\n    LongPrototype.lte = LongPrototype.lessThanOrEqual;\r\n\r\n    /**\r\n     * Tests if this Long's value is greater than the specified's.\r\n     * @param {!Long|number|string} other Other value\r\n     * @returns {boolean}\r\n     */\r\n    LongPrototype.greaterThan = function greaterThan(other) {\r\n        return this.comp(/* validates */ other) > 0;\r\n    };\r\n\r\n    /**\r\n     * Tests if this Long's value is greater than the specified's. This is an alias of {@link Long#greaterThan}.\r\n     * @function\r\n     * @param {!Long|number|string} other Other value\r\n     * @returns {boolean}\r\n     */\r\n    LongPrototype.gt = LongPrototype.greaterThan;\r\n\r\n    /**\r\n     * Tests if this Long's value is greater than or equal the specified's.\r\n     * @param {!Long|number|string} other Other value\r\n     * @returns {boolean}\r\n     */\r\n    LongPrototype.greaterThanOrEqual = function greaterThanOrEqual(other) {\r\n        return this.comp(/* validates */ other) >= 0;\r\n    };\r\n\r\n    /**\r\n     * Tests if this Long's value is greater than or equal the specified's. This is an alias of {@link Long#greaterThanOrEqual}.\r\n     * @function\r\n     * @param {!Long|number|string} other Other value\r\n     * @returns {boolean}\r\n     */\r\n    LongPrototype.gte = LongPrototype.greaterThanOrEqual;\r\n\r\n    /**\r\n     * Compares this Long's value with the specified's.\r\n     * @param {!Long|number|string} other Other value\r\n     * @returns {number} 0 if they are the same, 1 if the this is greater and -1\r\n     *  if the given one is greater\r\n     */\r\n    LongPrototype.compare = function compare(other) {\r\n        if (!isLong(other))\r\n            other = fromValue(other);\r\n        if (this.eq(other))\r\n            return 0;\r\n        var thisNeg = this.isNegative(),\r\n            otherNeg = other.isNegative();\r\n        if (thisNeg && !otherNeg)\r\n            return -1;\r\n        if (!thisNeg && otherNeg)\r\n            return 1;\r\n        // At this point the sign bits are the same\r\n        if (!this.unsigned)\r\n            return this.sub(other).isNegative() ? -1 : 1;\r\n        // Both are positive if at least one is unsigned\r\n        return (other.high >>> 0) > (this.high >>> 0) || (other.high === this.high && (other.low >>> 0) > (this.low >>> 0)) ? -1 : 1;\r\n    };\r\n\r\n    /**\r\n     * Compares this Long's value with the specified's. This is an alias of {@link Long#compare}.\r\n     * @function\r\n     * @param {!Long|number|string} other Other value\r\n     * @returns {number} 0 if they are the same, 1 if the this is greater and -1\r\n     *  if the given one is greater\r\n     */\r\n    LongPrototype.comp = LongPrototype.compare;\r\n\r\n    /**\r\n     * Negates this Long's value.\r\n     * @returns {!Long} Negated Long\r\n     */\r\n    LongPrototype.negate = function negate() {\r\n        if (!this.unsigned && this.eq(MIN_VALUE))\r\n            return MIN_VALUE;\r\n        return this.not().add(ONE);\r\n    };\r\n\r\n    /**\r\n     * Negates this Long's value. This is an alias of {@link Long#negate}.\r\n     * @function\r\n     * @returns {!Long} Negated Long\r\n     */\r\n    LongPrototype.neg = LongPrototype.negate;\r\n\r\n    /**\r\n     * Returns the sum of this and the specified Long.\r\n     * @param {!Long|number|string} addend Addend\r\n     * @returns {!Long} Sum\r\n     */\r\n    LongPrototype.add = function add(addend) {\r\n        if (!isLong(addend))\r\n            addend = fromValue(addend);\r\n\r\n        // Divide each number into 4 chunks of 16 bits, and then sum the chunks.\r\n\r\n        var a48 = this.high >>> 16;\r\n        var a32 = this.high & 0xFFFF;\r\n        var a16 = this.low >>> 16;\r\n        var a00 = this.low & 0xFFFF;\r\n\r\n        var b48 = addend.high >>> 16;\r\n        var b32 = addend.high & 0xFFFF;\r\n        var b16 = addend.low >>> 16;\r\n        var b00 = addend.low & 0xFFFF;\r\n\r\n        var c48 = 0, c32 = 0, c16 = 0, c00 = 0;\r\n        c00 += a00 + b00;\r\n        c16 += c00 >>> 16;\r\n        c00 &= 0xFFFF;\r\n        c16 += a16 + b16;\r\n        c32 += c16 >>> 16;\r\n        c16 &= 0xFFFF;\r\n        c32 += a32 + b32;\r\n        c48 += c32 >>> 16;\r\n        c32 &= 0xFFFF;\r\n        c48 += a48 + b48;\r\n        c48 &= 0xFFFF;\r\n        return fromBits((c16 << 16) | c00, (c48 << 16) | c32, this.unsigned);\r\n    };\r\n\r\n    /**\r\n     * Returns the difference of this and the specified Long.\r\n     * @param {!Long|number|string} subtrahend Subtrahend\r\n     * @returns {!Long} Difference\r\n     */\r\n    LongPrototype.subtract = function subtract(subtrahend) {\r\n        if (!isLong(subtrahend))\r\n            subtrahend = fromValue(subtrahend);\r\n        return this.add(subtrahend.neg());\r\n    };\r\n\r\n    /**\r\n     * Returns the difference of this and the specified Long. This is an alias of {@link Long#subtract}.\r\n     * @function\r\n     * @param {!Long|number|string} subtrahend Subtrahend\r\n     * @returns {!Long} Difference\r\n     */\r\n    LongPrototype.sub = LongPrototype.subtract;\r\n\r\n    /**\r\n     * Returns the product of this and the specified Long.\r\n     * @param {!Long|number|string} multiplier Multiplier\r\n     * @returns {!Long} Product\r\n     */\r\n    LongPrototype.multiply = function multiply(multiplier) {\r\n        if (this.isZero())\r\n            return ZERO;\r\n        if (!isLong(multiplier))\r\n            multiplier = fromValue(multiplier);\r\n        if (multiplier.isZero())\r\n            return ZERO;\r\n        if (this.eq(MIN_VALUE))\r\n            return multiplier.isOdd() ? MIN_VALUE : ZERO;\r\n        if (multiplier.eq(MIN_VALUE))\r\n            return this.isOdd() ? MIN_VALUE : ZERO;\r\n\r\n        if (this.isNegative()) {\r\n            if (multiplier.isNegative())\r\n                return this.neg().mul(multiplier.neg());\r\n            else\r\n                return this.neg().mul(multiplier).neg();\r\n        } else if (multiplier.isNegative())\r\n            return this.mul(multiplier.neg()).neg();\r\n\r\n        // If both longs are small, use float multiplication\r\n        if (this.lt(TWO_PWR_24) && multiplier.lt(TWO_PWR_24))\r\n            return fromNumber(this.toNumber() * multiplier.toNumber(), this.unsigned);\r\n\r\n        // Divide each long into 4 chunks of 16 bits, and then add up 4x4 products.\r\n        // We can skip products that would overflow.\r\n\r\n        var a48 = this.high >>> 16;\r\n        var a32 = this.high & 0xFFFF;\r\n        var a16 = this.low >>> 16;\r\n        var a00 = this.low & 0xFFFF;\r\n\r\n        var b48 = multiplier.high >>> 16;\r\n        var b32 = multiplier.high & 0xFFFF;\r\n        var b16 = multiplier.low >>> 16;\r\n        var b00 = multiplier.low & 0xFFFF;\r\n\r\n        var c48 = 0, c32 = 0, c16 = 0, c00 = 0;\r\n        c00 += a00 * b00;\r\n        c16 += c00 >>> 16;\r\n        c00 &= 0xFFFF;\r\n        c16 += a16 * b00;\r\n        c32 += c16 >>> 16;\r\n        c16 &= 0xFFFF;\r\n        c16 += a00 * b16;\r\n        c32 += c16 >>> 16;\r\n        c16 &= 0xFFFF;\r\n        c32 += a32 * b00;\r\n        c48 += c32 >>> 16;\r\n        c32 &= 0xFFFF;\r\n        c32 += a16 * b16;\r\n        c48 += c32 >>> 16;\r\n        c32 &= 0xFFFF;\r\n        c32 += a00 * b32;\r\n        c48 += c32 >>> 16;\r\n        c32 &= 0xFFFF;\r\n        c48 += a48 * b00 + a32 * b16 + a16 * b32 + a00 * b48;\r\n        c48 &= 0xFFFF;\r\n        return fromBits((c16 << 16) | c00, (c48 << 16) | c32, this.unsigned);\r\n    };\r\n\r\n    /**\r\n     * Returns the product of this and the specified Long. This is an alias of {@link Long#multiply}.\r\n     * @function\r\n     * @param {!Long|number|string} multiplier Multiplier\r\n     * @returns {!Long} Product\r\n     */\r\n    LongPrototype.mul = LongPrototype.multiply;\r\n\r\n    /**\r\n     * Returns this Long divided by the specified. The result is signed if this Long is signed or\r\n     *  unsigned if this Long is unsigned.\r\n     * @param {!Long|number|string} divisor Divisor\r\n     * @returns {!Long} Quotient\r\n     */\r\n    LongPrototype.divide = function divide(divisor) {\r\n        if (!isLong(divisor))\r\n            divisor = fromValue(divisor);\r\n        if (divisor.isZero())\r\n            throw Error('division by zero');\r\n        if (this.isZero())\r\n            return this.unsigned ? UZERO : ZERO;\r\n        var approx, rem, res;\r\n        if (!this.unsigned) {\r\n            // This section is only relevant for signed longs and is derived from the\r\n            // closure library as a whole.\r\n            if (this.eq(MIN_VALUE)) {\r\n                if (divisor.eq(ONE) || divisor.eq(NEG_ONE))\r\n                    return MIN_VALUE;  // recall that -MIN_VALUE == MIN_VALUE\r\n                else if (divisor.eq(MIN_VALUE))\r\n                    return ONE;\r\n                else {\r\n                    // At this point, we have |other| >= 2, so |this/other| < |MIN_VALUE|.\r\n                    var halfThis = this.shr(1);\r\n                    approx = halfThis.div(divisor).shl(1);\r\n                    if (approx.eq(ZERO)) {\r\n                        return divisor.isNegative() ? ONE : NEG_ONE;\r\n                    } else {\r\n                        rem = this.sub(divisor.mul(approx));\r\n                        res = approx.add(rem.div(divisor));\r\n                        return res;\r\n                    }\r\n                }\r\n            } else if (divisor.eq(MIN_VALUE))\r\n                return this.unsigned ? UZERO : ZERO;\r\n            if (this.isNegative()) {\r\n                if (divisor.isNegative())\r\n                    return this.neg().div(divisor.neg());\r\n                return this.neg().div(divisor).neg();\r\n            } else if (divisor.isNegative())\r\n                return this.div(divisor.neg()).neg();\r\n            res = ZERO;\r\n        } else {\r\n            // The algorithm below has not been made for unsigned longs. It's therefore\r\n            // required to take special care of the MSB prior to running it.\r\n            if (!divisor.unsigned)\r\n                divisor = divisor.toUnsigned();\r\n            if (divisor.gt(this))\r\n                return UZERO;\r\n            if (divisor.gt(this.shru(1))) // 15 >>> 1 = 7 ; with divisor = 8 ; true\r\n                return UONE;\r\n            res = UZERO;\r\n        }\r\n\r\n        // Repeat the following until the remainder is less than other:  find a\r\n        // floating-point that approximates remainder / other *from below*, add this\r\n        // into the result, and subtract it from the remainder.  It is critical that\r\n        // the approximate value is less than or equal to the real value so that the\r\n        // remainder never becomes negative.\r\n        rem = this;\r\n        while (rem.gte(divisor)) {\r\n            // Approximate the result of division. This may be a little greater or\r\n            // smaller than the actual value.\r\n            approx = Math.max(1, Math.floor(rem.toNumber() / divisor.toNumber()));\r\n\r\n            // We will tweak the approximate result by changing it in the 48-th digit or\r\n            // the smallest non-fractional digit, whichever is larger.\r\n            var log2 = Math.ceil(Math.log(approx) / Math.LN2),\r\n                delta = (log2 <= 48) ? 1 : pow_dbl(2, log2 - 48),\r\n\r\n            // Decrease the approximation until it is smaller than the remainder.  Note\r\n            // that if it is too large, the product overflows and is negative.\r\n                approxRes = fromNumber(approx),\r\n                approxRem = approxRes.mul(divisor);\r\n            while (approxRem.isNegative() || approxRem.gt(rem)) {\r\n                approx -= delta;\r\n                approxRes = fromNumber(approx, this.unsigned);\r\n                approxRem = approxRes.mul(divisor);\r\n            }\r\n\r\n            // We know the answer can't be zero... and actually, zero would cause\r\n            // infinite recursion since we would make no progress.\r\n            if (approxRes.isZero())\r\n                approxRes = ONE;\r\n\r\n            res = res.add(approxRes);\r\n            rem = rem.sub(approxRem);\r\n        }\r\n        return res;\r\n    };\r\n\r\n    /**\r\n     * Returns this Long divided by the specified. This is an alias of {@link Long#divide}.\r\n     * @function\r\n     * @param {!Long|number|string} divisor Divisor\r\n     * @returns {!Long} Quotient\r\n     */\r\n    LongPrototype.div = LongPrototype.divide;\r\n\r\n    /**\r\n     * Returns this Long modulo the specified.\r\n     * @param {!Long|number|string} divisor Divisor\r\n     * @returns {!Long} Remainder\r\n     */\r\n    LongPrototype.modulo = function modulo(divisor) {\r\n        if (!isLong(divisor))\r\n            divisor = fromValue(divisor);\r\n        return this.sub(this.div(divisor).mul(divisor));\r\n    };\r\n\r\n    /**\r\n     * Returns this Long modulo the specified. This is an alias of {@link Long#modulo}.\r\n     * @function\r\n     * @param {!Long|number|string} divisor Divisor\r\n     * @returns {!Long} Remainder\r\n     */\r\n    LongPrototype.mod = LongPrototype.modulo;\r\n\r\n    /**\r\n     * Returns the bitwise NOT of this Long.\r\n     * @returns {!Long}\r\n     */\r\n    LongPrototype.not = function not() {\r\n        return fromBits(~this.low, ~this.high, this.unsigned);\r\n    };\r\n\r\n    /**\r\n     * Returns the bitwise AND of this Long and the specified.\r\n     * @param {!Long|number|string} other Other Long\r\n     * @returns {!Long}\r\n     */\r\n    LongPrototype.and = function and(other) {\r\n        if (!isLong(other))\r\n            other = fromValue(other);\r\n        return fromBits(this.low & other.low, this.high & other.high, this.unsigned);\r\n    };\r\n\r\n    /**\r\n     * Returns the bitwise OR of this Long and the specified.\r\n     * @param {!Long|number|string} other Other Long\r\n     * @returns {!Long}\r\n     */\r\n    LongPrototype.or = function or(other) {\r\n        if (!isLong(other))\r\n            other = fromValue(other);\r\n        return fromBits(this.low | other.low, this.high | other.high, this.unsigned);\r\n    };\r\n\r\n    /**\r\n     * Returns the bitwise XOR of this Long and the given one.\r\n     * @param {!Long|number|string} other Other Long\r\n     * @returns {!Long}\r\n     */\r\n    LongPrototype.xor = function xor(other) {\r\n        if (!isLong(other))\r\n            other = fromValue(other);\r\n        return fromBits(this.low ^ other.low, this.high ^ other.high, this.unsigned);\r\n    };\r\n\r\n    /**\r\n     * Returns this Long with bits shifted to the left by the given amount.\r\n     * @param {number|!Long} numBits Number of bits\r\n     * @returns {!Long} Shifted Long\r\n     */\r\n    LongPrototype.shiftLeft = function shiftLeft(numBits) {\r\n        if (isLong(numBits))\r\n            numBits = numBits.toInt();\r\n        if ((numBits &= 63) === 0)\r\n            return this;\r\n        else if (numBits < 32)\r\n            return fromBits(this.low << numBits, (this.high << numBits) | (this.low >>> (32 - numBits)), this.unsigned);\r\n        else\r\n            return fromBits(0, this.low << (numBits - 32), this.unsigned);\r\n    };\r\n\r\n    /**\r\n     * Returns this Long with bits shifted to the left by the given amount. This is an alias of {@link Long#shiftLeft}.\r\n     * @function\r\n     * @param {number|!Long} numBits Number of bits\r\n     * @returns {!Long} Shifted Long\r\n     */\r\n    LongPrototype.shl = LongPrototype.shiftLeft;\r\n\r\n    /**\r\n     * Returns this Long with bits arithmetically shifted to the right by the given amount.\r\n     * @param {number|!Long} numBits Number of bits\r\n     * @returns {!Long} Shifted Long\r\n     */\r\n    LongPrototype.shiftRight = function shiftRight(numBits) {\r\n        if (isLong(numBits))\r\n            numBits = numBits.toInt();\r\n        if ((numBits &= 63) === 0)\r\n            return this;\r\n        else if (numBits < 32)\r\n            return fromBits((this.low >>> numBits) | (this.high << (32 - numBits)), this.high >> numBits, this.unsigned);\r\n        else\r\n            return fromBits(this.high >> (numBits - 32), this.high >= 0 ? 0 : -1, this.unsigned);\r\n    };\r\n\r\n    /**\r\n     * Returns this Long with bits arithmetically shifted to the right by the given amount. This is an alias of {@link Long#shiftRight}.\r\n     * @function\r\n     * @param {number|!Long} numBits Number of bits\r\n     * @returns {!Long} Shifted Long\r\n     */\r\n    LongPrototype.shr = LongPrototype.shiftRight;\r\n\r\n    /**\r\n     * Returns this Long with bits logically shifted to the right by the given amount.\r\n     * @param {number|!Long} numBits Number of bits\r\n     * @returns {!Long} Shifted Long\r\n     */\r\n    LongPrototype.shiftRightUnsigned = function shiftRightUnsigned(numBits) {\r\n        if (isLong(numBits))\r\n            numBits = numBits.toInt();\r\n        numBits &= 63;\r\n        if (numBits === 0)\r\n            return this;\r\n        else {\r\n            var high = this.high;\r\n            if (numBits < 32) {\r\n                var low = this.low;\r\n                return fromBits((low >>> numBits) | (high << (32 - numBits)), high >>> numBits, this.unsigned);\r\n            } else if (numBits === 32)\r\n                return fromBits(high, 0, this.unsigned);\r\n            else\r\n                return fromBits(high >>> (numBits - 32), 0, this.unsigned);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Returns this Long with bits logically shifted to the right by the given amount. This is an alias of {@link Long#shiftRightUnsigned}.\r\n     * @function\r\n     * @param {number|!Long} numBits Number of bits\r\n     * @returns {!Long} Shifted Long\r\n     */\r\n    LongPrototype.shru = LongPrototype.shiftRightUnsigned;\r\n\r\n    /**\r\n     * Converts this Long to signed.\r\n     * @returns {!Long} Signed long\r\n     */\r\n    LongPrototype.toSigned = function toSigned() {\r\n        if (!this.unsigned)\r\n            return this;\r\n        return fromBits(this.low, this.high, false);\r\n    };\r\n\r\n    /**\r\n     * Converts this Long to unsigned.\r\n     * @returns {!Long} Unsigned long\r\n     */\r\n    LongPrototype.toUnsigned = function toUnsigned() {\r\n        if (this.unsigned)\r\n            return this;\r\n        return fromBits(this.low, this.high, true);\r\n    };\r\n\r\n    /**\r\n     * Converts this Long to its byte representation.\r\n     * @param {boolean=} le Whether little or big endian, defaults to big endian\r\n     * @returns {!Array.<number>} Byte representation\r\n     */\r\n    LongPrototype.toBytes = function(le) {\r\n        return le ? this.toBytesLE() : this.toBytesBE();\r\n    }\r\n\r\n    /**\r\n     * Converts this Long to its little endian byte representation.\r\n     * @returns {!Array.<number>} Little endian byte representation\r\n     */\r\n    LongPrototype.toBytesLE = function() {\r\n        var hi = this.high,\r\n            lo = this.low;\r\n        return [\r\n             lo         & 0xff,\r\n            (lo >>>  8) & 0xff,\r\n            (lo >>> 16) & 0xff,\r\n            (lo >>> 24) & 0xff,\r\n             hi         & 0xff,\r\n            (hi >>>  8) & 0xff,\r\n            (hi >>> 16) & 0xff,\r\n            (hi >>> 24) & 0xff\r\n        ];\r\n    }\r\n\r\n    /**\r\n     * Converts this Long to its big endian byte representation.\r\n     * @returns {!Array.<number>} Big endian byte representation\r\n     */\r\n    LongPrototype.toBytesBE = function() {\r\n        var hi = this.high,\r\n            lo = this.low;\r\n        return [\r\n            (hi >>> 24) & 0xff,\r\n            (hi >>> 16) & 0xff,\r\n            (hi >>>  8) & 0xff,\r\n             hi         & 0xff,\r\n            (lo >>> 24) & 0xff,\r\n            (lo >>> 16) & 0xff,\r\n            (lo >>>  8) & 0xff,\r\n             lo         & 0xff\r\n        ];\r\n    }\r\n\r\n    return Long;\r\n});\r\n","import Long, { fromString } from \"long\";\r\nimport { addMarker, attachContextMenu, deleteMarker, drawAllMarkers, Marker } from \"./marker\";\r\nimport { SlimeChunkHandler } from \"./slimeChunk\";\r\n\r\nexport interface Vector2D {\r\n    x: number;\r\n    z: number;\r\n}\r\n\r\nexport interface AABB {\r\n    x1: number;\r\n    z1: number;\r\n    x2: number;\r\n    z2: number;\r\n}\r\n\r\nconst getV2sfromAABB = (aabb: AABB): { p1: Vector2D, p2: Vector2D } => {\r\n    return {\r\n        p1: { x: aabb.x1, z: aabb.z1 },\r\n        p2: { x: aabb.x2, z: aabb.z2 }\r\n    };\r\n};\r\n\r\nconst getAABBfromV2s = (p1: Vector2D, p2: Vector2D): AABB => {\r\n    return {\r\n        x1: p1.x,\r\n        z1: p1.z,\r\n        x2: p2.x,\r\n        z2: p2.z\r\n    };\r\n};\r\n\r\nconst origin: Vector2D = { x: 0, z: 0 };\r\n\r\ninterface Config {\r\n    seed?: string;\r\n    renderControls?: boolean;\r\n    bottom?: boolean;\r\n    allowMarkers: boolean;\r\n    mapBackgroundColor: string;\r\n    uiBackgroundColor: string;\r\n    slimeChunkColor: string;\r\n    strokeColor: string;\r\n    textColor: string;\r\n    markerDefaultColor: string;\r\n}\r\n\r\ninterface Controls {\r\n    seedInput: HTMLInputElement;\r\n    xInput: HTMLInputElement;\r\n    zInput: HTMLInputElement;\r\n}\r\n\r\nexport class SlimeMap {\r\n    /** The maps seed */\r\n    private seed: Long;\r\n    /** canvas height */\r\n    private height = 0;\r\n    /** canvas width */\r\n    private width = 0;\r\n    /** x position on the map. (viewer/camera position) */\r\n    private xPos = 0;\r\n    /** y position on the map. (viewer/camera position) */\r\n    private zPos = 0;\r\n    /** the cursor Position (canvas coordinate system) */\r\n    public mousePos: Vector2D = { ...origin };\r\n    /** zoom factor. higher means larger area visible */\r\n    public zoom = 2.5;\r\n    private minzoom = 0.7;\r\n    private maxzoom = 5;\r\n    /** viewport: visible area on the map in coordinates (not px). slightly oversized to compensate for partly visible chunks. */\r\n    private vp!: AABB;\r\n    /** visible area on map in chunks. */\r\n    private chunkvp!: AABB;\r\n    /** the border on the left side between canvas and map edge. */\r\n    public borderleft = 70;\r\n    /** the border on the top side between canvas and map edge. */\r\n    public bordertop = 50;\r\n    /** the border on the bottom side between canvas and map edge. */\r\n    private borderbottom = 20;\r\n    /** the border on the left bottom between canvas and map edge. */\r\n    public borderright = 20;\r\n    public markers: Marker[] = [];\r\n    public canvas: HTMLCanvasElement;\r\n    public ctx: CanvasRenderingContext2D;\r\n    private SCH: SlimeChunkHandler;\r\n    public config: Config;\r\n    private controls: Controls = undefined as any;\r\n    /** Reference to marker automatically placed by gotoCoordinates. */\r\n    private jumpMarker: Marker | undefined;\r\n\r\n    public constructor(id: string, config?: Partial<Config>) {\r\n        this.config = {\r\n            strokeColor: \"#000000\",\r\n            textColor: \"#000000\",\r\n            mapBackgroundColor: \"#e0e0e0\",\r\n            uiBackgroundColor: \"#CED4DE\",\r\n            slimeChunkColor: \"#44dd55\",\r\n            markerDefaultColor: \"#aa0000\",\r\n            allowMarkers: true,\r\n            ...config\r\n        };\r\n\r\n\r\n        this.canvas = this.createDOM(id);\r\n\r\n        attachContextMenu(this);\r\n\r\n        this.canvas.setAttribute(\"style\", \"cursor: grab; cursor: -webkit-grab\");\r\n        const ctx = this.canvas.getContext(\"2d\");\r\n        this.ctx = ctx ? ctx : new CanvasRenderingContext2D();\r\n        this.assertEventHandlers();\r\n\r\n        this.seed = !!this.config.seed ? fromString(this.config.seed) : new Long(Date.now());\r\n        this.SCH = new SlimeChunkHandler(this.seed);\r\n        this.updateSizes();\r\n        // this.drawStaticUI();\r\n        this.redraw();\r\n\r\n        this.canvas.onmousemove = (event: MouseEvent) => {\r\n            this.mousePos = { x: event.offsetX, z: event.offsetY };\r\n            if (event.buttons === 1) {\r\n                this.xPos -= event.movementX / this.zoom;\r\n                this.zPos -= event.movementY / this.zoom;\r\n                this.redraw();\r\n            } else {\r\n                this.drawFooter();\r\n            }\r\n        };\r\n\r\n        this.canvas.onmousedown = (_event: MouseEvent) => {\r\n            const vec = this.getMapCoord(this.mousePos);\r\n            if (vec) {\r\n                this.canvas.setAttribute(\"style\", \"cursor: grabbing; cursor: -webkit-grabbing\");\r\n            }\r\n        };\r\n\r\n        this.canvas.onmouseup = (_event: MouseEvent) => {\r\n            this.canvas.setAttribute(\"style\", \"cursor: grab; cursor: -webkit-grab\");\r\n        };\r\n\r\n    }\r\n\r\n    public setSeed(seed: string) {\r\n        this.seed = fromString(seed);\r\n        this.SCH = new SlimeChunkHandler(this.seed);\r\n        this.redraw();\r\n    }\r\n\r\n    public gotoCoordinate(x: number, z: number);\r\n    public gotoCoordinate(coordinate: Vector2D);\r\n    public gotoCoordinate(param1: number | Vector2D, y?: number) {\r\n        const coordinate = this.isVector2D(param1) ? param1 : { x: param1, z: y as number };\r\n        this.xPos = coordinate.x;\r\n        this.zPos = coordinate.z;\r\n        this.redraw();\r\n    }\r\n\r\n    private loadFont() {\r\n        const link = document.createElement('link');\r\n        link.rel = 'stylesheet';\r\n        link.type = 'text/css';\r\n        link.href = 'https://fonts.googleapis.com/css?family=Montserrat:300,400';\r\n        document.head.appendChild(link);\r\n\r\n        //rerender a few times for the first few seconds,\r\n        const i = setInterval(() => {\r\n            this.drawStaticUI();\r\n            this.drawUI();\r\n        }, 100);\r\n        setTimeout(() => clearInterval(i), 2000);\r\n    }\r\n\r\n    private createDOM(id: string): HTMLCanvasElement {\r\n        this.loadFont();\r\n\r\n        const parent = document.getElementById(id);\r\n        if (!parent) {\r\n            throw (new Error(\"Element not found.\"));\r\n        }\r\n        const canvas: HTMLCanvasElement = document.createElement(\"canvas\");\r\n\r\n        let container: HTMLElement;\r\n        if (parent.tagName === \"CANVAS\") {\r\n            container = document.createElement(\"div\");\r\n            // tslint:disable-next-line:prefer-for-of\r\n            for (let i = 0; i < parent.attributes.length; i++) {\r\n                const attr = parent.attributes[i];\r\n                if (attr.name === \"width\" || attr.name === \"height\") {\r\n                    container.style[attr.name] = attr.value;\r\n                }\r\n                container.setAttribute(attr.name, attr.value);\r\n            }\r\n            container.appendChild(canvas);\r\n\r\n            const pparent = parent.parentNode || document.body;\r\n            pparent.replaceChild(container, parent);\r\n        } else {\r\n            container = parent;\r\n            container.appendChild(canvas);\r\n        }\r\n\r\n        container.style.position = \"relative\";\r\n        canvas.width = container.offsetWidth;\r\n        canvas.height = container.offsetHeight;\r\n        canvas.id = parent.id ? parent.id + \"canvas\" : \"slimemap-canvas\";\r\n\r\n        if (this.config.renderControls) {\r\n            const height = this.renderControls(container, this.config.bottom);\r\n            this.borderbottom += this.config.bottom ? height : 0;\r\n            this.bordertop += this.config.bottom ? 0 : height;\r\n        }\r\n\r\n        return canvas as HTMLCanvasElement;\r\n    }\r\n\r\n    private renderControls(container: HTMLElement, bottom: boolean = false) {\r\n        const controlsdDiv = document.createElement(\"div\");\r\n        const height = \"28px\";\r\n        Object.assign<CSSStyleDeclaration, Partial<CSSStyleDeclaration>>(controlsdDiv.style, {\r\n            display: \"flex\",\r\n            width: \"100%\",\r\n            justifyContent: \"space-between\",\r\n            position: \"absolute\",\r\n            bottom: bottom ? \"0px\" : \"auto\",\r\n            top: bottom ? \"auto\" : height,\r\n            paddingRight: this.borderright + \"px\",\r\n            paddingLeft: this.borderleft + \"px\",\r\n            boxSizing: \"border-box\",\r\n            height,\r\n            lineHeight: height\r\n        });\r\n\r\n        const seedDiv = document.createElement(\"div\");\r\n        const seedInput: HTMLInputElement = document.createElement(\"input\");\r\n        seedInput.type = \"text\";\r\n        seedInput.placeholder = \"enter seed\";\r\n        const seedButton = document.createElement(\"button\");\r\n        seedButton.innerText = \"Find Slimes\";\r\n        seedButton.addEventListener(\"click\", () => {\r\n            this.setSeed(seedInput.value);\r\n            seedInput.value = \"\";\r\n        });\r\n        seedDiv.appendChild(seedInput);\r\n        seedDiv.appendChild(seedButton);\r\n\r\n        const navDiv = document.createElement(\"div\");\r\n        const xInput: HTMLInputElement = document.createElement(\"input\");\r\n        xInput.type = \"text\";\r\n        xInput.placeholder = \"X\";\r\n        xInput.style.width = \"100px\";\r\n        const zInput: HTMLInputElement = document.createElement(\"input\");\r\n        zInput.type = \"text\";\r\n        zInput.placeholder = \"Z\";\r\n        zInput.style.width = \"100px\";\r\n        const navButton = document.createElement(\"button\");\r\n        navButton.innerText = \"go to coordinates\";\r\n        navButton.addEventListener(\"click\", () => {\r\n            const coordinate: Vector2D = { x: Number(xInput.value), z: Number(zInput.value) };\r\n            if (this.jumpMarker) {\r\n                deleteMarker(this.jumpMarker, this);\r\n            }\r\n            this.jumpMarker = { location: coordinate, label: `( X: ${coordinate.x} / Z: ${coordinate.z} )` };\r\n            addMarker(this.jumpMarker, this);\r\n            this.gotoCoordinate(coordinate);\r\n            xInput.value = \"\";\r\n            zInput.value = \"\";\r\n        });\r\n        navDiv.appendChild(xInput);\r\n        navDiv.appendChild(zInput);\r\n        navDiv.appendChild(navButton);\r\n\r\n\r\n        controlsdDiv.appendChild(seedDiv);\r\n        controlsdDiv.appendChild(navDiv);\r\n        container.appendChild(controlsdDiv);\r\n        this.controls = {\r\n            seedInput,\r\n            xInput,\r\n            zInput\r\n        };\r\n\r\n        return controlsdDiv.offsetHeight;\r\n    }\r\n\r\n    private assertEventHandlers() {\r\n        const mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? \"DOMMouseScroll\" : \"mousewheel\"; //FF doesn't recognize mousewheel as of FF3.x\r\n        const evt = (e) => this.onscroll(e);\r\n\r\n        if ((this.canvas as any).attachEvent) {//if IE (and Opera depending on user setting)\r\n            (this.canvas as any).attachEvent(\"on\" + mousewheelevt, evt);\r\n        }\r\n        else if (this.canvas.addEventListener) {//WC3 browsers\r\n            this.canvas.addEventListener(mousewheelevt, evt, false);\r\n        }\r\n    }\r\n\r\n    private onscroll(event: WheelEvent) {\r\n        const pos = this.getMapCoord(this.mousePos);\r\n        if (pos) {\r\n            event.preventDefault();\r\n            let zoomfactor = 0.2;\r\n            if (this.zoom < 2) {\r\n                zoomfactor /= 2;\r\n            }\r\n            const direction = event.detail > 0 ? -1 : 1;\r\n            zoomfactor *= direction;\r\n\r\n            if ((this.zoom + zoomfactor) >= this.minzoom && (this.zoom + zoomfactor) <= this.maxzoom) {\r\n                // zoom should be based on cursor position, i.e. the map position under the cursor should not change\r\n                // during scroll. this means we can calc the offset of the positions before and after scrolling and apply\r\n                // it to the position.\r\n                this.zoom += zoomfactor;\r\n                this.updateSizes();\r\n                const newPos = this.getMapCoord(this.mousePos) as Vector2D;\r\n                const offset = {\r\n                    x: pos.x - newPos.x,\r\n                    z: pos.z - newPos.z\r\n                };\r\n                this.xPos += offset.x;\r\n                this.zPos += offset.z;\r\n\r\n                this.redraw();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * calculates the visible map area in chunk representation.\r\n     * Result is slightly oversized to account for partially visible chunks.\r\n     */\r\n    private calcChunkVP(): AABB {\r\n        const v2s = getV2sfromAABB(this.vp);\r\n        return getAABBfromV2s(\r\n            this.doMath(v2s.p1, c => Math.floor(c / 16)),\r\n            this.doMath(v2s.p2, c => Math.ceil(c / 16))\r\n        );\r\n    }\r\n\r\n    private updateSizes() {\r\n        this.width = this.canvas.width;\r\n        this.height = this.canvas.height;\r\n        this.vp = this.calcViewport();\r\n        this.chunkvp = this.calcChunkVP();\r\n    }\r\n\r\n    private drawFooter() {\r\n        const vec = this.getMapCoord(this.mousePos);\r\n        if (vec) {\r\n            this.clearfooter();\r\n            this.ctx.font = \"normal 15px 'Montserrat'\";\r\n            this.ctx.fillStyle = this.config.textColor;\r\n            this.ctx.fillText(\"X: \" + vec.x.toFixed(0) + \"\\t Z: \" + vec.z.toFixed(0), this.borderleft, this.height - this.borderbottom + 15);\r\n\r\n            const Chunk = this.doMath(vec, c => Math.floor(c / 16));\r\n            const Slimes = this.SCH.isSlimeChunk(Chunk) ? \"ja\" : \"nein\";\r\n            this.ctx.fillText(\"Slimes: \" + Slimes, this.borderleft + 200, this.height - this.borderbottom + 15);\r\n\r\n            const From = this.ChunkToCoord(Chunk);\r\n            const To = this.doMath(From, c => c + 15);\r\n\r\n            this.ctx.textAlign = \"end\";\r\n            this.ctx.fillText(\"Chunk: ( \" + Chunk.x + \" / \" + Chunk.z + \" )  im Bereich von: ( \" +\r\n                From.x + \" / \" + From.z + \")  bis: ( \" +\r\n                To.x + \" / \" + To.z + \" )\", this.width - this.borderright, this.height - this.borderbottom + 15);\r\n            this.ctx.textAlign = \"start\";\r\n        }\r\n    }\r\n\r\n    private clearfooter() {\r\n        this.ctx.fillStyle = this.config.uiBackgroundColor;\r\n        this.ctx.fillRect(this.borderleft - 1, this.height - this.borderbottom, this.width - this.borderleft, this.borderbottom);\r\n    }\r\n\r\n    public redraw() {\r\n        this.vp = this.calcViewport();\r\n\r\n        //fill map\r\n        this.ctx.fillStyle = this.config.mapBackgroundColor;\r\n        this.ctx.fillRect(this.borderleft, this.bordertop, this.width - this.borderleft - this.borderright, this.height - this.bordertop - this.borderbottom);\r\n\r\n        //UI\r\n        this.updateSlimeVP();\r\n        this.drawSlimeChunks();\r\n        this.drawGrid();\r\n        drawAllMarkers(this);\r\n\r\n        this.clearBorderRight();\r\n        this.clearfooter();\r\n        this.drawStaticUI();\r\n        this.drawUI();\r\n    }\r\n\r\n    private updateSlimeVP() {\r\n        if (JSON.stringify(this.chunkvp) !== JSON.stringify(this.calcChunkVP())) {\r\n            this.chunkvp = this.calcChunkVP();\r\n        }\r\n    }\r\n\r\n    private drawSlimeChunks() {\r\n        this.ctx.fillStyle = this.config.slimeChunkColor;\r\n\r\n        for (let x = this.chunkvp.x1; x < this.chunkvp.x2; x++) {\r\n            for (let z = this.chunkvp.z1; z < this.chunkvp.z2; z++) {\r\n                if (this.SCH.isSlimeChunk({ x, z })) {\r\n                    const vec = this.ChunkToCoord({ x, z });\r\n\r\n                    let vec2 = this.getAbsCoord(vec);\r\n                    if (vec2) {\r\n                        this.ctx.fillRect(vec2.x + 1, vec2.z + 1, 16 * this.zoom - 1, 16 * this.zoom - 1);\r\n                        continue;\r\n                    }\r\n                    //slime chunk may be partially on map (overlap in x direction)\r\n                    vec2 = this.getAbsCoord({ x: vec.x + 16, z: vec.z });\r\n                    if (vec2) {\r\n                        this.ctx.fillRect(vec2.x - 16 * this.zoom, vec2.z, 16 * this.zoom - 1, 16 * this.zoom - 1);\r\n                        continue;\r\n                    }\r\n                    //slime chunk may be partially on map (overlap in y direction)\r\n                    vec2 = this.getAbsCoord({ x: vec.x, z: vec.z + 16 });\r\n                    if (vec2) {\r\n                        this.ctx.fillRect(vec2.x, vec2.z - 16 * this.zoom, 16 * this.zoom - 1, 16 * this.zoom - 1);\r\n                        continue;\r\n                    }\r\n                    //slime chunk may be partially on map (overlap in both directions)\r\n                    vec2 = this.getAbsCoord({ x: vec.x + 16, z: vec.z + 16 });\r\n                    if (vec2) {\r\n                        this.ctx.fillRect(vec2.x - 16 * this.zoom, vec2.z - 16 * this.zoom, 16 * this.zoom - 1, 16 * this.zoom - 1);\r\n                        continue;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private drawUI() {\r\n        let factor = 16;\r\n        if (this.zoom < 2) { factor *= 2; }\r\n        if (this.zoom < 0.9) { factor *= 2; }\r\n        this.ctx.font = \"normal 12px 'Montserrat'\";\r\n        this.ctx.fillStyle = this.config.textColor;\r\n        //X\r\n        for (let i = Math.ceil(this.vp.x1 / factor); i <= Math.floor(this.vp.x2 / factor); i++) {\r\n            const mark = i * factor;\r\n            let pos: Vector2D = { x: mark, z: this.vp.z1 };\r\n            pos = this.getAbsCoord(pos, true);\r\n            this.ctx.fillText(mark + \"\", pos.x - (mark.toString().length * 3), this.bordertop - 5);\r\n        }\r\n        //Z\r\n        for (let i = Math.ceil(this.vp.z1 / factor); i <= Math.floor(this.vp.z2 / factor); i++) {\r\n            const mark = i * factor;\r\n            let pos: Vector2D = { x: this.vp.x1, z: mark };\r\n            pos = this.getAbsCoord(pos, true);\r\n            this.ctx.fillText(mark + \"\", this.borderleft - 30, pos.z + 4);\r\n        }\r\n    }\r\n\r\n    private drawStaticUI() {\r\n        //clear;\r\n        this.ctx.font = \"normal 12px 'Montserrat'\";\r\n        this.ctx.fillStyle = this.config.uiBackgroundColor;\r\n        this.ctx.fillRect(0, 0, this.width, this.bordertop);\r\n        this.ctx.fillRect(0, 0, this.borderleft, this.height);\r\n\r\n        //Border\r\n        this.ctx.lineWidth = 1;\r\n        this.ctx.beginPath();\r\n        this.ctx.fillStyle = this.config.strokeColor;\r\n        this.ctx.strokeStyle = this.config.strokeColor;\r\n        this.ctx.moveTo(this.width - this.borderright, this.bordertop - 1);\r\n        this.ctx.lineTo(this.borderleft - 1, this.bordertop - 1);\r\n        this.ctx.lineTo(this.borderleft - 1, this.height - this.borderbottom);\r\n        this.ctx.stroke();\r\n        this.ctx.closePath();\r\n\r\n        this.ctx.strokeStyle = \"#333333\";\r\n        this.ctx.fillStyle = \"#333333\";\r\n        //North\r\n        this.ctx.lineWidth = 0.7;\r\n        this.ctx.beginPath();\r\n        this.ctx.moveTo(15, 5);\r\n        this.ctx.lineTo(5, 30);\r\n        this.ctx.lineTo(15, 20);\r\n        this.ctx.stroke();\r\n        this.ctx.closePath();\r\n        this.ctx.beginPath();\r\n        this.ctx.moveTo(15, 20);\r\n        this.ctx.lineTo(25, 30);\r\n        this.ctx.lineTo(15, 5);\r\n        this.ctx.fill();\r\n        this.ctx.stroke();\r\n        this.ctx.closePath();\r\n        this.ctx.fillText(\"N\", 10, 40);\r\n        this.ctx.font = \"normal 15px 'Montserrat'\";\r\n        this.ctx.fillText(\"Seed: \" + this.seed.toString(), this.borderleft, 20);\r\n\r\n        //Axisnames\r\n        //X\r\n        this.ctx.font = \"normal 20px 'Montserrat'\";\r\n        const mapwidthcenter = this.borderleft + ((this.width - this.borderleft - this.borderright) / 2);\r\n        this.ctx.fillText(\"X\", mapwidthcenter - 10, 20);\r\n        this.ctx.lineWidth = 0.4;\r\n        this.ctx.beginPath();\r\n        this.ctx.moveTo(mapwidthcenter + 5, 13);\r\n        this.ctx.lineTo(mapwidthcenter + 17, 13);\r\n        this.ctx.lineTo(mapwidthcenter + 14, 10);\r\n        this.ctx.stroke();\r\n        this.ctx.moveTo(mapwidthcenter + 17, 13);\r\n        this.ctx.lineTo(mapwidthcenter + 14, 16);\r\n        this.ctx.stroke();\r\n        this.ctx.closePath();\r\n        //Z\r\n        const mapheightcenter = this.bordertop + ((this.height - this.bordertop - this.borderbottom) / 2);\r\n        this.ctx.fillText(\"Z\", 7.5, mapheightcenter - 5);\r\n        this.ctx.lineWidth = 0.4;\r\n        this.ctx.beginPath();\r\n        this.ctx.moveTo(13, mapheightcenter);\r\n        this.ctx.lineTo(13, mapheightcenter + 12);\r\n        this.ctx.lineTo(10, mapheightcenter + 9);\r\n        this.ctx.stroke();\r\n        this.ctx.moveTo(13, mapheightcenter + 12);\r\n        this.ctx.lineTo(16, mapheightcenter + 9);\r\n        this.ctx.stroke();\r\n        this.ctx.closePath();\r\n    }\r\n\r\n    private drawGrid() {\r\n        const factor = 16;\r\n        this.ctx.strokeStyle = this.config.strokeColor;\r\n        //X\r\n        for (let i = Math.ceil(this.vp.x1 / factor); i <= Math.floor(this.vp.x2 / factor); i++) {\r\n            this.ctx.lineWidth = (i === 0) ? 0.8 : 0.5;\r\n            const mark = i * factor;\r\n            let pos: Vector2D = { x: mark, z: this.vp.z1 };\r\n            pos = this.getAbsCoord(pos, true);\r\n            this.ctx.beginPath();\r\n            this.ctx.moveTo(pos.x, this.bordertop);\r\n            this.ctx.lineTo(pos.x, this.height - this.borderbottom);\r\n            this.ctx.stroke();\r\n            this.ctx.closePath();\r\n        }\r\n        //Z\r\n        for (let i = Math.ceil(this.vp.z1 / factor); i <= Math.floor(this.vp.z2 / factor); i++) {\r\n            this.ctx.lineWidth = (i === 0) ? 0.8 : 0.5;\r\n            const mark = i * factor;\r\n            let pos: Vector2D = { x: this.vp.x1, z: mark };\r\n            pos = this.getAbsCoord(pos, true);\r\n            this.ctx.beginPath();\r\n            this.ctx.moveTo(this.borderleft, pos.z);\r\n            this.ctx.lineTo(this.width - this.borderright, pos.z);\r\n            this.ctx.stroke();\r\n            this.ctx.closePath();\r\n        }\r\n    }\r\n\r\n    private clearBorderRight() {\r\n        this.ctx.fillStyle = this.config.uiBackgroundColor;\r\n        this.ctx.fillRect(this.width - this.borderright, 0, this.borderright, this.height);\r\n    }\r\n\r\n    private isInVP(vec: Vector2D): boolean {\r\n        return (vec.x >= this.vp.x1 && vec.x <= this.vp.x2 &&\r\n            vec.z >= this.vp.z1 && vec.z <= this.vp.z2);\r\n    }\r\n\r\n    private isOverMap(vec: Vector2D): boolean {\r\n        return (\r\n            vec.x >= this.borderleft && vec.x <= (this.width - this.borderright) &&\r\n            vec.z >= this.bordertop && vec.z <= (this.height - this.borderbottom));\r\n    }\r\n\r\n    public getAbsCoord(vec: Vector2D): false | Vector2D;\r\n    public getAbsCoord(vec: Vector2D, ignoreBorder: true): Vector2D;\r\n    public getAbsCoord(vec: Vector2D, ignoreBorder: boolean = false): false | Vector2D {\r\n        if (this.isInVP(vec) || ignoreBorder) {\r\n            const vec2 = { ...origin };\r\n            vec2.x = ((Math.floor(vec.x) - this.vp.x1) * this.zoom) + this.borderleft;\r\n            vec2.z = ((Math.floor(vec.z) - this.vp.z1) * this.zoom) + this.bordertop;\r\n            return vec2;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public getMapCoord(vec: Vector2D): false | Vector2D {\r\n        if (this.isOverMap(vec)) {\r\n            const vec2: Vector2D = { ...origin };\r\n            vec2.x = Math.round((vec.x - this.borderleft) / this.zoom);\r\n            vec2.z = Math.round((vec.z - this.bordertop) / this.zoom);\r\n            vec2.x += this.vp.x1;\r\n            vec2.z += this.vp.z1;\r\n            return vec2;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private calcViewport(): AABB {\r\n        const v: Partial<AABB> = {};\r\n        let mapWidth = this.width - this.borderleft - this.borderright;\r\n        let mapHeight = this.height - this.bordertop - this.borderbottom;\r\n        mapWidth /= this.zoom;\r\n        mapHeight /= this.zoom;\r\n        v.x1 = Math.floor((this.xPos - (mapWidth / 2)));\r\n        v.z1 = Math.floor((this.zPos - (mapHeight / 2)));\r\n        v.x2 = Math.ceil((this.xPos + (mapWidth / 2)));\r\n        v.z2 = Math.ceil((this.zPos + (mapHeight / 2)));\r\n        return v as AABB;\r\n    }\r\n\r\n    /**\r\n     * takes a number, vector or area and applies the given (arithmetic) function to each value.\r\n     */\r\n    private doMath(number: number, f: (x: number) => number): number;\r\n    private doMath(vec: Vector2D, f: (x: number) => number): Vector2D;\r\n    private doMath(area: AABB, f: (x: number) => number): AABB;\r\n    private doMath(arg: number | Vector2D | AABB, f: (x: number) => number): number | Vector2D | AABB;\r\n    private doMath(arg: number | Vector2D | AABB, f: (x: number) => number): number | Vector2D | AABB {\r\n        if (this.isVector2D(arg)) {\r\n            return {\r\n                x: this.doMath(arg.x, f),\r\n                z: this.doMath(arg.z, f)\r\n            };\r\n        }\r\n        else if (this.isAABB(arg)) {\r\n            const v2s = getV2sfromAABB(arg);\r\n            return getAABBfromV2s(this.doMath(v2s.p1, f), this.doMath(v2s.p2, f));\r\n        }\r\n        return f(arg);\r\n    }\r\n\r\n    public ChunkToCoord(number: number): number;\r\n    public ChunkToCoord(vec: Vector2D): Vector2D;\r\n    public ChunkToCoord(area: AABB): AABB;\r\n    public ChunkToCoord(arg: number | Vector2D | AABB): number | Vector2D | AABB {\r\n        return this.doMath(arg, x => x * 16);\r\n    }\r\n\r\n    private isVector2D(vec: any): vec is Vector2D {\r\n        if (typeof vec !== \"object\") {\r\n            return false;\r\n        }\r\n        const keys = Object.keys(vec);\r\n        return keys.length === 2 && typeof vec.x === \"number\" && typeof vec.z === \"number\";\r\n    }\r\n\r\n    private isAABB(vec: any): vec is AABB {\r\n        if (typeof vec !== \"object\") {\r\n            return false;\r\n        }\r\n        const keys = Object.keys(vec);\r\n        return keys.length === 4 && typeof vec.x1 === \"number\" && typeof vec.z1 === \"number\" && typeof vec.x2 === \"number\" && typeof vec.z2 === \"number\";\r\n    }\r\n\r\n}\r\n\r\n(window as any).SlimeMap = SlimeMap;\r\n","import \"./ctxMenu.min\";\r\nimport { SlimeMap, Vector2D } from \"./slimeMap\";\r\n\r\nexport interface Marker {\r\n    location: Vector2D;\r\n    label?: string;\r\n    color?: string;\r\n}\r\n\r\nexport function attachContextMenu(sm: SlimeMap) {\r\n    window.ContextMenu.attach(\"#\" + sm.canvas.id, [], (cxm) => {\r\n        const coord = sm.getMapCoord(sm.mousePos);\r\n        if (coord === false) {\r\n            return [];\r\n        }\r\n\r\n        const getLabelDesc = (marker: Marker) => marker.label ? `\"${marker.label}\"` : `at ${JSON.stringify(marker.location)}`\r\n\r\n        const closestMarker = findClosestMarker(coord, sm, 40 / sm.zoom); // increase search area the further zoomed out\r\n        if (closestMarker) {\r\n            const label = getLabelDesc(closestMarker);\r\n            cxm = cxm.concat([\r\n                {\r\n                    text: `Marker ${label}:`\r\n                },\r\n                {\r\n                    text: `Edit marker ${label}`,\r\n                    action: () => {\r\n                        showEditMarkerDialog(closestMarker, sm, (updatedMarker) => {\r\n                            deleteMarker(closestMarker, sm);\r\n                            addMarker(updatedMarker, sm);\r\n                        });\r\n                    }\r\n                },\r\n                {\r\n                    text: `Delete marker ${label}`,\r\n                    action: () => deleteMarker(closestMarker, sm)\r\n                },\r\n                { isDivider: true }\r\n            ]);\r\n        }\r\n\r\n        if (sm.config.allowMarkers) {\r\n            cxm = cxm.concat([\r\n                {\r\n                    text: \"Add marker\",\r\n                    action: () => {\r\n                        showEditMarkerDialog({\r\n                            location: coord\r\n                        }, sm, (marker) => {\r\n                            addMarker(marker, sm);\r\n                        });\r\n                    }\r\n                },\r\n                {\r\n                    text: \"Delete all markers\",\r\n                    action: () => {\r\n                        deleteAllMarkers(sm);\r\n                    },\r\n                    disabled: sm.markers.length === 0\r\n                }\r\n            ]);\r\n        }\r\n        cxm.push({\r\n            text: \"Go to marker\",\r\n            subMenu: sm.markers.map((marker): CTXMItem => ({\r\n                text: getLabelDesc(marker),\r\n                action: () => sm.gotoCoordinate(marker.location)\r\n            })),\r\n            disabled: sm.markers.length === 0\r\n        }\r\n        );\r\n        return cxm;\r\n    });\r\n\r\n\r\n    const style = document.createElement(\"style\");\r\n    style.innerText = `\r\n        .ctxmenu {\r\n            background-color: ${sm.config.uiBackgroundColor};\r\n            box-shadow: 3px 3px 15px;\r\n        }\r\n\r\n        .ctxmenu li.disabled {\r\n            color: #999;\r\n        }\r\n\r\n        .dialog {\r\n            font-family: 'Montserrat';\r\n        }\r\n    `;\r\n    document.head.appendChild(style);\r\n}\r\n\r\nexport function addMarker(marker: Marker, sm: SlimeMap) {\r\n    sm.markers.push(marker);\r\n    sm.redraw();\r\n}\r\n\r\nexport function deleteAllMarkers(sm: SlimeMap) {\r\n    sm.markers = [];\r\n    sm.redraw();\r\n}\r\n\r\nexport function deleteMarker(index: number, sm: SlimeMap): boolean;\r\nexport function deleteMarker(marker: Marker, sm: SlimeMap): boolean;\r\nexport function deleteMarker(arg0: number | Marker, sm: SlimeMap): boolean {\r\n    if (typeof arg0 === \"number\") {\r\n        if (arg0 < sm.markers.length) {\r\n            sm.markers.splice(arg0, 1);\r\n            sm.redraw();\r\n            return true;\r\n        }\r\n    }\r\n    else if (sm.markers.includes(arg0)) {\r\n        sm.markers.splice(sm.markers.indexOf(arg0), 1);\r\n        sm.redraw();\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nexport function findClosestMarker(searchPos: Vector2D, sm: SlimeMap, maxRadius: number = Infinity): Marker | undefined {\r\n    if (sm.markers.length === 0) {\r\n        return undefined;\r\n    }\r\n    let closestMarker: Marker | undefined;\r\n    let closestDistance: number = Infinity;\r\n    sm.markers.forEach(marker => {\r\n        //Pythagoras\r\n        const distance = Math.sqrt(\r\n            Math.pow(marker.location.x - searchPos.x, 2) +\r\n            Math.pow(marker.location.z - searchPos.z, 2)\r\n        );\r\n        if (distance < maxRadius && distance < closestDistance) {\r\n            closestDistance = distance;\r\n            closestMarker = marker;\r\n        }\r\n    });\r\n\r\n    return closestMarker;\r\n}\r\n\r\nexport function drawAllMarkers(sm: SlimeMap) {\r\n    for (const marker of sm.markers) {\r\n        sm.ctx.strokeStyle = sm.config.strokeColor;\r\n        sm.ctx.fillStyle = marker.color || sm.config.markerDefaultColor;\r\n        sm.ctx.lineWidth = 1;\r\n        const coord = sm.getAbsCoord(marker.location, true);\r\n\r\n        const { x, z } = coord;\r\n\r\n        const size = 32;\r\n\r\n        const height = size;\r\n        const width = 2 * height / 3;\r\n\r\n        sm.ctx.beginPath();\r\n        sm.ctx.moveTo(x, z);\r\n        sm.ctx.bezierCurveTo(x - width / 8, z - width / 16 * 9, x - width / 2, z - width / 16 * 9, x - width / 2, z - width);\r\n        sm.ctx.arcTo(x - width / 2, z - height, x, z - height, width / 2);\r\n        sm.ctx.arcTo(x + width / 2, z - height, x + width / 2, z - width, width / 2);\r\n        sm.ctx.bezierCurveTo(x + width / 2, z - width / 16 * 9, x + width / 8, z - width / 16 * 9, x, z);\r\n        sm.ctx.fill();\r\n        sm.ctx.stroke();\r\n\r\n        sm.ctx.fill();\r\n\r\n        sm.ctx.stroke();\r\n        sm.ctx.closePath();\r\n\r\n        if (marker.label) {\r\n            sm.ctx.font = \"normal 15px 'Montserrat'\";\r\n            sm.ctx.textAlign = \"center\";\r\n            const textWidth = sm.ctx.measureText(marker.label).width;\r\n            sm.ctx.fillStyle = \"rgba(206,212,222,0.7)\";\r\n            sm.ctx.fillRect(x - textWidth / 2 - 3, z - size - 30, textWidth + 6, 21);\r\n            sm.ctx.fillStyle = sm.config.textColor;\r\n            sm.ctx.fillText(marker.label, x, z - size - 15);\r\n            sm.ctx.textAlign = \"left\";\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n * @param marker the default marker properties\r\n * @param onSubmit callback when the dialog is submitted\r\n */\r\nexport function showEditMarkerDialog(marker: Marker, sm: SlimeMap, onSubmit: (marker: Marker) => void) {\r\n    const parent = sm.canvas.parentElement;\r\n    if (!parent) {\r\n        throw (\"Canvas has no parent\");\r\n    }\r\n\r\n    const popup = document.createElement(\"div\");\r\n    popup.style.display = \"grid\";\r\n    popup.style.gridTemplateColumns = \"auto auto\";\r\n    popup.style.padding = \"15px\";\r\n    popup.className = \"dialog\";\r\n\r\n    const labelInput = document.createElement(\"input\");\r\n    const labelLabel = document.createElement(\"label\");\r\n    labelInput.value = marker.label || \"New Marker\";\r\n    labelLabel.innerText = \"Marker Label:\"\r\n    popup.appendChild(labelLabel);\r\n    popup.appendChild(labelInput);\r\n\r\n    const colorInput = document.createElement(\"input\");\r\n    const colorLabel = document.createElement(\"label\");\r\n    colorInput.type = \"color\";\r\n    colorInput.value = marker.color || sm.config.markerDefaultColor\r\n    colorLabel.innerText = \"Marker Color:\"\r\n    popup.appendChild(colorLabel);\r\n    popup.appendChild(colorInput);\r\n\r\n    const xposInput = document.createElement(\"input\");\r\n    const xPosLabel = document.createElement(\"label\");\r\n    xposInput.type = \"number\";\r\n    xposInput.value = marker.location.x + \"\";\r\n    xPosLabel.innerText = \"Marker X Position:\"\r\n    popup.appendChild(xPosLabel);\r\n    popup.appendChild(xposInput);\r\n\r\n    const zposInput = document.createElement(\"input\");\r\n    const zPosLabel = document.createElement(\"label\");\r\n    zposInput.type = \"number\";\r\n    zposInput.value = marker.location.z + \"\";\r\n    zPosLabel.innerText = \"Marker Z Position:\"\r\n    popup.appendChild(zPosLabel);\r\n    popup.appendChild(zposInput);\r\n\r\n    const cancelBtn = document.createElement(\"button\");\r\n    cancelBtn.innerText = \"Cancel\";\r\n    popup.appendChild(cancelBtn);\r\n\r\n    const submitBtn = document.createElement(\"button\");\r\n    submitBtn.innerText = \"Submit\";\r\n    popup.appendChild(submitBtn);\r\n\r\n    const bounding = getBounding(popup);\r\n\r\n    Object.assign<CSSStyleDeclaration, Partial<CSSStyleDeclaration>>(popup.style, {\r\n        position: \"relative\",\r\n        margin: \"auto\",\r\n        zIndex: \"999\",\r\n        background: sm.config.uiBackgroundColor,\r\n        top: ((-parent.offsetHeight - bounding.height) * 0.5) + \"px\",\r\n        width: \"300px\",\r\n        boxShadow: `${sm.config.strokeColor} 3px 3px 15px`,\r\n        left: `${sm.borderleft - sm.borderright}px`\r\n    });\r\n\r\n    parent.appendChild(popup);\r\n\r\n    submitBtn.onclick = () => {\r\n        parent.removeChild(popup);\r\n        marker = {\r\n            label: labelInput.value,\r\n            color: colorInput.value,\r\n            location: {\r\n                x: Number(xposInput.value),\r\n                z: Number(zposInput.value)\r\n            }\r\n        }\r\n        onSubmit(marker);\r\n    }\r\n\r\n    cancelBtn.onclick = () => {\r\n        parent.removeChild(popup);\r\n    }\r\n}\r\n\r\nexport function getBounding(elem: HTMLElement): ClientRect | DOMRect {\r\n    const container = elem.cloneNode(true) as HTMLElement;\r\n    container.style.visibility = \"hidden\";\r\n    document.body.appendChild(container);\r\n    const result = container.getBoundingClientRect();\r\n    document.body.removeChild(container);\r\n    return result;\r\n}","\"use strict\";/*! ctxMenu v1.0 | (c) Nikolaj Kappler | https://github.com/nkappler/ctxmenu/blob/master/LICENSE !*/function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError(\"Cannot call a class as a function\")}var ContextMenu=function(){function a(){var b=this;_classCallCheck(this,a),this.cache={},this.dir=\"r\",window.addEventListener(\"click\",function(){return b.closeMenu()}),window.addEventListener(\"resize\",function(){return b.closeMenu()}),window.addEventListener(\"scroll\",function(){return b.closeMenu()})}return a.prototype.attach=function(a,b){var c=this,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(a){return a},e=document.querySelector(a);if(void 0!==this.cache[a])return void console.error(\"target element \"+a+\" already has a context menu assigned. Use ContextMenu.update() intstead.\");if(!e)return void console.error(\"target element \"+a+\" not found\");var f=function(a){a.stopImmediatePropagation(),c.closeMenu(),c.dir=\"r\";var e=d([].concat(b),a);c.menu=c.generateDOM(e,a),document.body.appendChild(c.menu),a.preventDefault()};this.cache[a]={ctxmenu:b,handler:f},e.addEventListener(\"contextmenu\",f)},a.prototype.update=function(a,b){var c=this.cache[a],d=document.querySelector(a);d&&d.removeEventListener(\"contextmenu\",c&&c.handler),delete this.cache[a],this.attach(a,b)},a.prototype.delete=function(a){var b=this.cache[a];if(!b)return void console.error(\"no context menu for target element \"+a+\" found\");var c=document.querySelector(a);return c?void(c.removeEventListener(\"contextmenu\",b.handler),delete this.cache[a]):void console.error(\"target element \"+a+\" does not exist (anymore)\")},a.prototype.closeMenu=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.menu;if(a){a===this.menu&&delete this.menu;var b=a.parentElement;b&&b.removeChild(a)}},a.prototype.debounce=function(a,b){var c;a.addEventListener(\"mouseenter\",function(a){c=setTimeout(function(){return b(a)},150)}),a.addEventListener(\"mouseleave\",function(){return clearTimeout(c)})},a.prototype.generateDOM=function(b,c){var d=this,e=document.createElement(\"ul\");0===b.length&&(e.style.display=\"none\"),b.forEach(function(b){var c=document.createElement(\"li\");d.debounce(c,function(){var a=c.parentElement&&c.parentElement.querySelector(\"ul\");a&&a.parentElement!==c&&d.closeMenu(a)}),a.itemIsDivider(b)?c.className=\"divider\":(c.innerHTML=\"<span>\"+b.text+\"</span>\",c.title=b.tooltip||\"\",a.itemIsInteractive(b)?b.disabled?(c.className=\"disabled\",a.itemIsSubMenu(b)&&(c.className=\"disabled submenu\")):(c.className=\"interactive\",a.itemIsAction(b)?c.addEventListener(\"click\",b.action):a.itemIsAnchor(b)?c.innerHTML=\"<a href=\\\"\"+b.href+\"\\\" target=\\\"\"+(b.target||\"\")+\"\\\">\"+b.text+\"</a>\":0===b.subMenu.length?c.className=\"disabled submenu\":(c.className=\"interactive submenu\",d.debounce(c,function(a){var e=c.querySelector(\"ul\");e||d.openSubMenu(a,b.subMenu,c)}))):(c.style.fontWeight=\"bold\",c.style.marginLeft=\"-5px\")),e.appendChild(c)}),e.style.position=\"fixed\",e.className=\"ctxmenu\";var f=a.getBounding(e),g={x:0,y:0};if(c instanceof Element){var h=c.getBoundingClientRect();g={x:\"r\"===this.dir?h.left+h.width:h.left-f.width,y:h.top-4},g.x!==this.getPosition(f,g).x&&(this.dir=\"r\"===this.dir?\"l\":\"r\",g.x=\"r\"===this.dir?h.left+h.width:h.left-f.width)}else g=this.getPosition(f,{x:c.clientX,y:c.clientY});return e.style.left=g.x+\"px\",e.style.top=g.y+\"px\",e.addEventListener(\"contextmenu\",function(a){a.stopPropagation(),a.preventDefault()}),e.addEventListener(\"click\",function(a){var b=a.target&&a.target.parentElement;b&&\"interactive\"!==b.className&&a.stopPropagation()}),e},a.prototype.openSubMenu=function(a,b,c){var d=c.parentElement&&c.parentElement.querySelector(\"li > ul\");d&&d.parentElement!==c&&this.closeMenu(d),c.appendChild(this.generateDOM(b,c))},a.getBounding=function(a){var b=a.cloneNode(!0);b.style.visibility=\"hidden\",document.body.appendChild(b);var c=b.getBoundingClientRect();return document.body.removeChild(b),c},a.prototype.getPosition=function(a,b){return{x:\"r\"===this.dir?b.x+a.width>window.innerWidth?window.innerWidth-a.width:b.x:0>b.x?0:b.x,y:b.y+a.height>window.innerHeight?window.innerHeight-a.height:b.y}},a.itemIsInteractive=function(a){return this.itemIsAction(a)||this.itemIsAnchor(a)||this.itemIsSubMenu(a)},a.itemIsAction=function(a){return a.hasOwnProperty(\"action\")},a.itemIsAnchor=function(a){return a.hasOwnProperty(\"href\")},a.itemIsDivider=function(a){return a.hasOwnProperty(\"isDivider\")},a.itemIsSubMenu=function(a){return a.hasOwnProperty(\"subMenu\")},a}();window.ContextMenu=new ContextMenu,document.addEventListener(\"readystatechange\",function(){if(\"interactive\"===document.readyState){var a=document.createElement(\"style\");a.innerHTML=\".ctxmenu{border:1px solid #999;padding:2px 0;box-shadow:3px 3px 3px #aaa;background:#fff;margin:0;font-size:15px;font-family:Verdana,sans-serif;z-index:9999}.ctxmenu li{margin:1px 0;display:block;position:relative}.ctxmenu li span,.ctxmenu li a{display:block;padding:2px 20px;cursor:default}.ctxmenu li a{color:inherit;text-decoration:none}.ctxmenu li.disabled{color:#ccc}.ctxmenu li.divider{border-bottom:1px solid #aaa;margin:5px 0}.ctxmenu li.interactive:hover{background:rgba(0,0,0,0.1)}.ctxmenu li.submenu::after{content:'>';position:absolute;display:block;top:0;right:0.3em;font-family:monospace;line-height:22px}\",document.head.insertBefore(a,document.head.childNodes[0])}});\r\n","import Long from \"long\";\r\nimport { NSeededRandom } from \"./seededRandom\";\r\nimport { Vector2D } from \"./slimeMap\";\r\n\r\nconst base = new Long(4987142);\r\nconst addend1 = new Long(5947611);\r\nconst addend2 = new Long(4392871);\r\nconst addend3 = new Long(389711);\r\nconst mask = new Long(987234911);\r\n\r\nexport class SlimeChunkHandler {\r\n    private cache: { [key: string]: boolean | undefined } = {};\r\n\r\n    public constructor(private seed: Long) { }\r\n\r\n    public isSlimeChunk(chunk: Vector2D) {\r\n        const key = `[${chunk.x},${chunk.z}]`;\r\n        if (this.cache[key] === undefined) {\r\n            this.cache[key] = isSlimeChunk(chunk, this.seed);\r\n        }\r\n        return this.cache[key];\r\n    }\r\n\r\n    public updateSeed(seed: Long) {\r\n        this.seed = seed;\r\n        delete this.cache;\r\n        this.cache = {};\r\n    }\r\n}\r\n\r\nexport function isSlimeChunk(chunk: Vector2D, seed: Long) {\r\n    const { x, z } = chunk;\r\n    const tempseed = base.multiply(x).multiply(x)\r\n        .add(addend1.multiply(x))\r\n        .add(addend2.multiply(z).multiply(z))\r\n        .add(addend3.multiply(z))\r\n        .add(seed).xor(mask);\r\n\r\n    const rnd = new NSeededRandom(tempseed);\r\n    return (rnd.nextInt(10) === 0);\r\n}\r\n","import Long, { ONE, ZERO } from \"long\";\r\n\r\ninterface ISeededRandom {\r\n    nextInt: (b: number) => number;\r\n}\r\n\r\nconst nmultiplier = new Long(0xDEECE66D, 0x5);\r\nconst naddend = new Long(0xB);\r\nconst nmask = new Long(0xFFFFFFFF, 0xFFFF);\r\n\r\nexport class NSeededRandom implements ISeededRandom {\r\n    private seed: Long;\r\n\r\n    public constructor(initseed: Long) {\r\n        this.seed = this.initialScramble(initseed);\r\n    }\r\n\r\n    private initialScramble(seed: Long) {\r\n        return seed.xor(nmultiplier).and(nmask);\r\n    }\r\n\r\n    private next(bits: number) {\r\n        this.seed = this.seed.multiply(nmultiplier).add(naddend).and(nmask);\r\n        return this.seed.shiftRight(48 - bits);\r\n    }\r\n\r\n    public nextInt(b: number) {\r\n        const bound = new Long(Math.abs(b));\r\n        if (bound.and(bound.negate()).isZero()) { // i.e., bound is a power of 2\r\n            return (bound.multiply(this.next(31)).shiftRight(31)).toInt();\r\n        }\r\n        // tslint:disable-next-line:one-variable-per-declaration\r\n        let bits: Long, val: Long;\r\n        do {\r\n            bits = this.next(31);\r\n            val = bits.modulo(bound);\r\n        } while (bits.sub(val).add(bound.sub(ONE)).lessThan(ZERO));\r\n        return val.toInt();\r\n    }\r\n}\r\n"],"sourceRoot":""}